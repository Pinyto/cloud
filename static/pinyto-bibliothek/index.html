<!DOCTYPE html>
<html lang="de" ng-app="Bib">
<head>
    <meta charset="utf-8"/>
    <title>Pinyto: Bibliothek</title>

    <link rel="stylesheet" href="css/bibliothek.css"/>

    <script type="text/javascript" src="lib/angular/angular.js"></script>
    <script type="text/javascript" src="lib/angular/angular-route.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/service.js"></script>
    <script type="text/javascript" src="js/bibCtrl.js"></script>
</head>
<body ng-controller="bibCtrl">
<form ng-submit="dataInput()" class="floating-list">
    <div class="box">
        Bibliothek: {{bookCount}} B端cher an {{placesUsed.length}} Orten. {{lentCount}} B端cher verliehen.
    </div>
    <div class="box center" id="search-box">
        <label for="search">Suchen:</label>
        <input type="search" name="search" id="search" ng-model="input" value="" ng-change="dataInput()"/>
        <input type="submit" value="Suchen"/>
    </div>
    <div class="box">
        <label for="place">Ort f端r neue B端cher:</label>
        <input type="text" name="place" id="place" value="Arbeitszimmer"
               ng-model="place"
               ng-change="resetCountdown()"
               ng-click="resetCountdown()"
               ng-focus="showPlaceSelector = true"
               ng-blur="hidePlaceSelector()"/>
        <div class="sizeless">
            <ul class="places-list" ng-show="placesUsed.length > 0 && showPlaceSelector"
                ng-mouseover="resetCountdown()" ng-mousemove="resetCountdown()">
                <li ng-repeat="selectedPlace in placesUsed" ng-click="setPlaceValue(selectedPlace)">
                    <a class="placeSelector">{{selectedPlace}}</a>
                </li>
            </ul>
        </div>
    </div>
</form>

<div class="results">
    <h2 class="center">Suchergebnisse</h2>
    <ul class="floating-list">
        <li ng-repeat="book in books" class="box" ng-click="setPlaceValue(book.data.place)">
            <div class="head-data">
                <span class="additional-info">
                    {{book.time.getDate()}}.{{book.time.getMonth()}}.{{book.time.getFullYear()}}
                    {{book.time.getHours()}}:{{book.time.getMinutes()}}
                </span>
                <span class="additional-info" style="float: right;" ng-if="book.data.isbn">
                    ISBN: {{book.data.isbn}}&nbsp;&nbsp;
                </span>
                <span class="additional-info" style="float: right;" ng-if="book.data.ean">
                    EAN: {{book.data.ean}}&nbsp;&nbsp;
                </span>
            </div>
            <div ng-if="book.data.author">{{book.data.author}}:</div>
            <h2>
                {{book.data.title}}
                <span class="heading-year" ng-if="book.data.year">({{book.data.year}})</span>
            </h2>

            <div ng-if="book.data.publisher">Verlag: {{book.data.publisher}}</div>
            <div class="additional-info" ng-if="book.data.languages">Sprachen: {{book.data.languages}}</div>
            <div class="additional-info" ng-if="book.data.category">Kategorie: {{book.data.category}}</div>
            <div class="additional-info">
                Standort:
                <input type="text"
                       ng-model="book.data.place"
                       ng-change="resetCountdown()"
                       ng-click="resetCountdown()"
                       ng-blur="saveBook(book)" />
            </div>
            <div class="additional-info">
                Verliehen an:
                <input type="text"
                       ng-model="book.data.lent"
                       ng-change="resetCountdown()"
                       ng-click="resetCountdown()"
                       ng-blur="saveBook(book)" />
            </div>
        </li>
    </ul>
</div>
</body>
</html>